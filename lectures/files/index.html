---
layout: default
title: Lecture 23
---

<div class="lecture">
  <ul class="outline">
    <li class="item">
      <h2 class="headline">Interacting With Files</h2>
      <div class="content">
        <div>
          <div class="point">
            <p class="topic">Why is interacting with files important?:</p>
            <ul class="details">
              <li>files allow data to persist after the program has finished executing</li>
              <li>all programs prior to now can only store data for the length of time the program is executing</li>
            </ul>
          </div>
        </div>
        <div>
          <div class="point">
            <p class="topic">How to interact with files?:</p>
            <ul class="details">
              <li>declare a file pointer <code>FILE *file_pointer;</code>
                <ul>
                  <li>read more about <code>FILE</code> here: <a href="http://www.cplusplus.com/reference/cstdio/FILE/">http://www.cplusplus.com/reference/cstdio/FILE/</a></li>
                  <li>review the lecture on pointers: <a href="{{ site.baseurl }}/lectures/pointers_addresses_values/">Pointers Lecture</a></li>
                </ul>
              </li>
              <li>attach a file to the file pointer <code>file_pointer = fopen("test.txt", "r");</code>
                <ul>
                  <li>read more about <code>fopen</code> here: <a href="http://www.cprogramming.com/tutorial/cfileio.html">http://www.cprogramming.com/tutorial/cfileio.html</a></li>
                  <li>understand the different modes to open a file:
                    <ul>
                      <li><code>r</code>: open for reading</li>
                      <li><code>w</code>: open for writing (file need not exist)</li>
                      <li><code>a</code>: open for appending (file need not exist)</li>
                      <li><code>r+</code>: open for reading and writing, start at beginning</li>
                      <li><code>w+</code>: open for reading and writing (overwrite file)</li>
                      <li><code>a+</code>: open for reading and writing (append if file exists)</li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li>read/write to the file using <code>fscanf</code>/<code>fprintf</code>
                <ul>
                  <li>read more about <code>fscanf</code> here: <a href="http://www.cplusplus.com/reference/cstdio/fscanf/">http://www.cplusplus.com/reference/cstdio/fscanf/</a></li>
                  <li>read more about <code>fprintf</code> here: <a href="http://www.cplusplus.com/reference/cstdio/fprintf/">http://www.cplusplus.com/reference/cstdio/fprintf/</a></li>
                </ul>
              </li>
              <li>close the file and file pointer <code>fclose(file_pointer);</code>
                <ul>
                  <li>read more about <code>fclose</code> here: <a href="http://www.cplusplus.com/reference/cstdio/fclose/">http://www.cplusplus.com/reference/cstdio/fclose/</a></li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </li>  
    <li class="item">
      <h2 class="headline">Open and Close a File</h2>
      <div class="content">
        <div class="point">
          <p class="topic">A simple example of opening and closing a file:</p>
          <div class="details">
            <p>This program opens and closes a file and displays a message if file was successfully or unsuccessfully opened</p>
            <p><em class="file well well-small"><a href="https://github.com/zhaol/ee160/blob/gh-pages/code/files/open_close_file.c">open_close_file.c</a></em>:</p>
            <script src="https://gist-it.appspot.com/http://github.com/zhaol/ee160/blob/gh-pages/code/files/open_close_file.c"></script>
          </div>
        </div>
        <div class="point">
          <p class="topic">NULL</p>
          <ul class="details">
            <li><code>NULL</code> is a way to detect if file was opened correctly or not</li>
            <li>you could just compare the file pointer to <code>0</code>, but <code>NULL</code> is more descriptive</li>
            <li>read more about <code>NULL</code> pointer here: <a href="http://en.wikipedia.org/wiki/Pointer_%28computer_programming%29#Null_pointer">http://en.wikipedia.org/wiki/Pointer_%28computer_programming%29#Null_pointer</a></li>
            <li>read more about <code>NULL</code> pointer vs <code>0</code> here: <a href="http://stackoverflow.com/questions/176989/do-you-use-null-or-0-zero-for-pointers-in-c">http://stackoverflow.com/questions/176989/do-you-use-null-or-0-zero-for-pointers-in-c</a></li>
          </ul>
        </div>
        <div class="point">
          <p class="topic">File Location</p>
          <ul class="details">
            <li>the file location parameter in <code>fopen(<strong>"data/test.txt"</strong>, "r");</code> is relative to where the executable is ran from</li>
            <li>the file location is not relative to where the <em class="file well well-small">open_close_file.c</em> file is located</li>
            <li>if <code>pwd</code> returns <pre>code/files</pre> and I run a program that opens <code>fopen(<strong>"data/test.txt"</strong>, "r");</code>, then the program is going to look for <pre>code/files/data/test.txt</pre></li>
          </ul>
        </div>
      </div>      
    </li>
    <li class="item">
      <h2 class="headline">Read From a File</h2>
      <div class="content">
        <div class="point">
          <p class="topic">A simple example of reading a file:</p>
          <div class="details">
            <p>This program reads from a file and displays the file contents to the user:</p>
            <p><em class="file well well-small"><a href="https://github.com/zhaol/ee160/blob/gh-pages/code/files/read_file.c">read_file.c</a></em>:</p>
            <script src="https://gist-it.appspot.com/http://github.com/zhaol/ee160/blob/gh-pages/code/files/read_file.c"></script>
            <p><em class="file well well-small"><a href="https://github.com/zhaol/ee160/blob/gh-pages/code/files/data/test.txt">data/test.txt</a></em>:</p>
            <script src="https://gist-it.appspot.com/http://github.com/zhaol/ee160/blob/gh-pages/code/files/data/test.txt"></script>
          </div>
        </div>
        <div class="point">
          <p class="topic">Things to note:</p>
          <div class="details">
            <ul>
              <li><code>fscanf</code> behaves very similarly to <code>scanf</code></li>
            </ul>
          </div>
        </div>      
        <div class="point">
          <p class="topic">Another example of reading a file:</p>
          <div class="details">
            <p>This program reads from a file using a <code>while</code> loop and displays the file contents to the user:</p>
            <p><em class="file well well-small"><a href="https://github.com/zhaol/ee160/blob/gh-pages/code/files/read_file_with_while.c">read_file_with_while.c</a></em>:</p>
            <script src="https://gist-it.appspot.com/http://github.com/zhaol/ee160/blob/gh-pages/code/files/read_file_with_while.c"></script>
            <p><em class="file well well-small"><a href="https://github.com/zhaol/ee160/blob/gh-pages/code/files/data/test.txt">data/test.txt</a></em>:</p>
            <script src="https://gist-it.appspot.com/http://github.com/zhaol/ee160/blob/gh-pages/code/files/data/test.txt"></script>
          </div>
        </div>
        <div class="point">
          <p class="topic">Things to note:</p>
          <div class="details">
            <ul>
              <li><code>EOF</code> means "end of file"</li>
              <li><code>EOF</code> is just a macro constant for <code>-1</code></li>
              <li>you could just compare <code>-1</code>, but <code>EOF</code> is more descriptive</li>
            </ul>
          </div>
        </div>      
      </div>
    </li>
    <li class="item">
      <h2 class="headline">Writing to a File</h2>
      <div class="content">
        <div class="point">
          <p class="topic">A simple example of writing to a file:</p>
          <div class="details">
            <p>This program creates a files and then writes to it:</p>
            <p><em class="file well well-small"><a href="https://github.com/zhaol/ee160/blob/gh-pages/code/files/write_file.c">write_file.c</a></em>:</p>
            <script src="https://gist-it.appspot.com/http://github.com/zhaol/ee160/blob/gh-pages/code/files/write_file.c"></script>
          </div>
        </div>      
        <div class="point">
          <p class="topic">Things to note:</p>
          <div class="details">
            <ul>
              <li><code>fprintf</code> behaves very similarly to <code>printf</code></li>
            </ul>
          </div>
        </div>      
      </div>
    </li>
    <li class="item">
      <h2 class="headline">Write a Program to Copy One File's Content to Another File</h2>
    </li>
    <li class="item">
      <h2 class="headline">Assignment</h2>
      <div class="content">
        <h4>Homework Problem 23.1, at the end of this problem you should submit to Laulima:</h4>
        <ul>
          <li>a file named <span class="file well well-small">UHusername_23_1.c</span></li>
          <li>a file named <span class="file well well-small">23_1.input</span></li>
          <li>
            <ul>example:
              <li><span class="file well well-small">zhaol_23_1.c</span></li>
              <li><span class="file well well-small">zhaol_23_1_functions.c</span></li>
              <li><span class="file well well-small">zhaol_23_1_functions.h</span></li>
            </ul>
          </li>
          <li>
            <p>Write a program that parses a text file (23_1.input) that contains the following <a href="http://rap.genius.com/2pac-dear-mama-lyrics">lyrics</a>:</p>
            <script src="https://gist-it.appspot.com/http://github.com/zhaol/ee160/blob/gh-pages/code/files/23_1.input"></script>          
          </li>
          <li>Test Case 1:
<pre>Successfully opened file
The word mama showed up 10 time(s)
</pre>
          </li>
          <li>
            <p>The program displays the number of times "mama" shows up in the text file, using arabic numbers (e.g. 1, 3, 20) and not words (e.g. one, three, twenty)</p>
            <ul>The program can assume:
              <li>all the text is lowercase</li>
              <li>there are no words that contain the sequence of characters m,a,m,a, such as mamaliga</li>
            </ul>
            <ul>For this assignment, you can use:
              <li>any function listed at <a href="http://www.mrx.net/c/readfunctions.html">http://www.mrx.net/c/readfunctions.html</a></li>
              <li>any function listed at <a href="http://en.wikipedia.org/wiki/C_string_handling#Functions">http://en.wikipedia.org/wiki/C_string_handling#Functions</a></li>
            </ul>
            <ul>Here are some things that might help:
              <li><a href="http://stackoverflow.com/questions/3825668/c-c-checking-for-null-pointer">http://stackoverflow.com/questions/3825668/c-c-checking-for-null-pointer</a></li>
              <li>
                <p><em class="file well well-small"><a href="https://github.com/zhaol/ee160/blob/gh-pages/code/files/reverse_truncate.c">reverse_truncate.c</a></em>:</p>
                <script src="https://gist-it.appspot.com/http://github.com/zhaol/ee160/blob/gh-pages/code/files/reverse_truncate.c"></script>
              </li>
            </ul>          
          </li>
        </ul>
      </div>
    </li>
    <li class="item">
      <h2 class="headline">Optional Assignments</h2>
      <div class="content">
        <p>Optional assignments are not graded and does not need to be turned in. It is intended to give you more practice (if you want it) using the programming concepts discussed in lecture. Some optional assignments are intended to introduce related concepts (if you care about it) not discussed in this course to broaden your knowledge about programming in general.</p>
        <p>If the optional assignment is modifying a required assignment, be sure to leave your previous assignment work untouched by copying them to a new folder for the optional assignment and modify only the files in the new folder</p>
        <div class="point">
          <h4 class="topic">Update 23.1 to take into account for multiple "mama"s on a single line</h4>
          <ul class="details">
            <li>Modify the program so it will count the following as 5 "Mama"s:</li>
            <li>
<pre>Mama, Mama you know I love you
Mama, Mama you're the queen of my heart
Your love is like tears from the stars
Mama I just want you to know lovin' you is like food to my soul
</pre>  
            </li>
          </ul>
        </div>
        <div class="point">
          <h4 class="topic">Update 23.1 to use regular expressions (aka regex)</h4>
          <ul class="details">
            <li><a href='http://www.regular-expressions.info/'>regex</a> is text parsing syntax that has been ported to many different programming languages</li>
            <li>You can learn the regex syntax at <a href='http://regexone.com/'>regexone</a></li>
            <li>C has a <a href='http://www.lemoda.net/c/unix-regex/'>regex library</a> that you can use for this optional assignment</li>
            <li>If getting regex working in C is too much of a hassle, you can also just try regex for the above text parsing assignments at <a href='http://rubular.com/'>rubular</a>. Rubular is the Ruby programming language's version of regex, and it will allow you to test regex capabilities that are common to all regex libraries in other languages.</li>
          </ul>
        </div>
      </div>
    </li>
  </ul>
</div>