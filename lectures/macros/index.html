---
layout: default
title: Lecture 17
---

<div class="lecture">
  <ul class="outline">
    <li class="item">
      <h2 class="headline">Macros</h2>
      <div class="content">
        <div class="point">
          <p class="topic">What are macros?</p>
          <ul class="details">
            <li>they tell the compiler to substitute an identifier with expressions, statements, or group of statements</li>
            <li>you can think of macros as if they are a way to tell the compiler to replace some code with other code</li>
          </ul>        
        </div>
        <div class="point">
          <p class="topic">Why are macros important?</p>
          <div class="details">
            <ul>
              <li>they make your code easier to read and maintain</li>
            </ul>
            <p><em class="file well well-small"><a href="https://github.com/zhaol/ee160/blob/gh-pages/code/macro/macro.c">macro.c</a></em>:</p>
            <script src="https://gist-it.appspot.com/http://github.com/zhaol/ee160/blob/gh-pages/code/macro/macro.c"></script>
            <p><em class="file well well-small"><a href="https://github.com/zhaol/ee160/blob/gh-pages/code/macro/common_constants.h">common_constants.h</a></em>:</p>
            <script src="https://gist-it.appspot.com/http://github.com/zhaol/ee160/blob/gh-pages/code/macro/common_constants.h"></script>
            <p>Things to note:</p>
            <ul>
              <li>macros can be in same file or included from separate file</li>
              <li>macros allow you to make a change in one location and have the change reflected everywhere else in the program</li>
              <li>macros are more useful with things that are used repeatedly</li>
              <li>read more at <a href="http://en.wikipedia.org/wiki/C_preprocessor#Macro_definition_and_expansion">http://en.wikipedia.org/wiki/C_preprocessor</a> (Section Macro Definition and Expansion</li>
              <li>read more at <a href="http://gcc.gnu.org/onlinedocs/cpp/Macros.html">http://gcc.gnu.org/onlinedocs/cpp/Macros.html</a> if you want to learn more advance uses of macros</li>
            </ul>                  
          </div>
        </div>
      </div>
    </li>
    <li class="item">
      <h2 class="headline">More Advanced Macros and Compilation Techniques</h2>
      <div class="content">
        <div class="point">
          <p class="topic">Macros for expressions and multiline statements</p>
          <ul class="details">
            <li>they can be faster than using functions</li>
            <li>functions are more flexible and easier to maintain</li>
            <li>recommend using functions first and only switch to macros if there's a need for it</li>
            <li>examples:
              <ul>
                <li>Macro for an expression:
                  <p><em class="file well well-small"><a href="https://github.com/zhaol/ee160/blob/gh-pages/code/macro/area.c">area.c</a></em>:</p>
                  <script src="https://gist-it.appspot.com/http://github.com/zhaol/ee160/blob/gh-pages/code/macro/area.c"></script>
                </li>
                <li>Macro for a function:
                  <p><em class="file well well-small"><a href="https://github.com/zhaol/ee160/blob/gh-pages/code/macro/count.c">count.c</a></em>:</p>
                  <script src="https://gist-it.appspot.com/http://github.com/zhaol/ee160/blob/gh-pages/code/macro/count.c"></script>
                </li>
              </ul>
            </li>
          </ul>
        </div>
        <div class="point">
          <p class="topic">Conditional Compilation</p>
          <ul class="details">
            <li>compiling some code based on a condition</li>
            <li>useful for inserting debug statements when necessary</li>
            <li>example:
              <ul>
                <li>Compile a debug statement only when debugging:
                  <p><em class="file well well-small"><a href="https://github.com/zhaol/ee160/blob/gh-pages/code/macro/debug.c">debug.c</a></em>:</p>
                  <script src="https://gist-it.appspot.com/http://github.com/zhaol/ee160/blob/gh-pages/code/macro/debug.c"></script>    
                </li>
              </ul>
            </li>
          </ul>        
        </div>
      </div>
    </li>  
    <li class="item">
      <h2 class="headline">Update net_balance.c to have Conditionally Compiled Debug Statements</h2>
      <div class="content">
        <div class="point">
          <p class="topic">Update <em class="file well well-small"><a href="https://github.com/zhaol/ee160/blob/gh-pages/code/net_balance/net_balance.c">net_balance.c</a></em> with conditional debug statements</p>
          <ul class="details">print out the following to help debug <em class="file well well-small"><a href="https://github.com/zhaol/ee160/blob/gh-pages/code/net_balance/net_balance.c">net_balance.c</a></em>:
            <li>account_balance</li>
            <li>account_type</li>
          </ul>        
        </div>
      </div>
    </li>
    <li class="item">
      <h2 class="headline">Assignment</h2>
      <div class="content">
        <h4>Homework Problem 17.1, at the end of this problem you should submit to Laulima:</h4>
        <ul>
          <li>a file named <span class="file well well-small">UHusername_17_1.c</span></li>
          <li>a file named <span class="file well well-small">UHusername_17_1_macros.h</span></li>
          <li>
            <ul>example:
              <li><span class="file well well-small">zhaol_17_1.c</span></li>
              <li><span class="file well well-small">zhaol_17_1_marcros.h</span></li>
            </ul>
          </li>
          <li>
            <p>write a program that includes a macro file <em class="file well well-small">UHusername_17_1_macros.h</em> and will be similar to <em class="file well well-small"><a href="http://github.com/zhaol/ee160/blob/gh-pages/code/macro/common_constants.h">common_constants.h</a></em>)</p>
            <ul>
              <li>the macro file will define the following:
                <ul>
                  <li>a macro named <code>PI</code> to 2 decimal places</li>
                  <li>a macro expression named <code>CIRCUMFERENCE</code> to calculate the circumference of the circle</li>
                  <li>a macro expression named <code>CIRCLE_AREA</code> to calculate the area of a circle</li>
                  <li>a macro expression named <code>SQUARE_AREA</code> to calculate the area of a square</li>
                </ul>
              <li>the program will ask for a length and then calculate the following:
                <ul>
                  <li>circumference of a circle</li>
                  <li>area of a circle</li>
                  <li>area of a square</li>
                </ul>
              </li>
              <li>if 3 was the inputted length, the program will use macros to print out the following:
<pre>the circumference of the circle is: 18.84
the area of the circle is: 28.26
the area of the square is: 9.00</pre>
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </li>
  </ul>
</div>